var Zt=Object.defineProperty;var jt=(r,e,n)=>e in r?Zt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var Y=(r,e,n)=>jt(r,typeof e!="symbol"?e+"":e,n);import"../chunks/CWj6FrbW.js";import{i as te}from"../chunks/ev6seNtB.js";import{s as H,o as ee,e as z}from"../chunks/DP9LMl7y.js";import{b as ne,h as P,a as se,w as t,ad as gt,r as ae,c as re,d as Mt,s as xt,e as _t,i as tt,T as le,X as ie,f as Ct,g as It,p as oe,ae as mt,$ as $t,M as St,af as ce,ag as C,ah as Et,O as ve,ai as pe,aj as ue,_ as fe,ak as he,al as de,am as _e,an as me,V as ge,B as Q,C as kt,m as K,F as M,I as b,G as x,A as ke,ao as ye,ap as be,D as we,t as R,aq as w,ar as Me,k as xe}from"../chunks/2r30YU3u.js";import{i as Tt}from"../chunks/CLKG6frT.js";function Se(r,e){return e}function Ee(r,e,n,a){for(var l=[],s=e.length,o=0;o<s;o++)ue(e[o].e,l,!0);var c=s>0&&l.length===0&&n!==null;if(c){var i=n.parentNode;fe(i),i.append(n),a.clear(),W(r,e[0].prev,e[s-1].next)}he(l,()=>{for(var k=0;k<s;k++){var v=e[k];c||(a.delete(v.k),W(r,v.prev,v.next)),de(v.e,!c)}})}function Te(r,e,n,a,l,s=null){var o=r,c={flags:e,items:new Map,first:null};P&&se();var i=null,k=!1,v=gt(()=>{var y=n();return ve(y)?y:y==null?[]:$t(y)});ne(()=>{var y=t(v),d=y.length;if(k&&d===0)return;k=d===0;let g=!1;if(P){var u=ae(o)===re;u!==(d===0)&&(o=Mt(),xt(o),_t(!1),g=!0)}if(P){for(var A=null,S,f=0;f<d;f++){if(tt.nodeType===le&&tt.data===ie){o=tt,g=!0,_t(!1);break}var p=y[f],T=a(p,f);S=Rt(tt,c,A,null,p,T,f,l,e,n),c.items.set(T,S),A=S}d>0&&xt(Mt())}P||Ne(y,c,o,l,e,a,n),s!==null&&(d===0?i?Ct(i):i=It(()=>s(o)):i!==null&&oe(i,()=>{i=null})),g&&_t(!0),t(v)}),P&&(o=tt)}function Ne(r,e,n,a,l,s,o){var c=r.length,i=e.items,k=e.first,v=k,y,d=null,g=[],u=[],A,S,f,p;for(p=0;p<c;p+=1){if(A=r[p],S=s(A,p),f=i.get(S),f===void 0){var T=v?v.e.nodes_start:n;d=Rt(T,e,d,d===null?e.first:d.next,A,S,p,a,l,o),i.set(S,d),g=[],u=[],v=d.next;continue}if(Ae(f,A,p),(f.e.f&mt)!==0&&Ct(f.e),f!==v){if(y!==void 0&&y.has(f)){if(g.length<u.length){var I=u[0],_;d=I.prev;var O=g[0],B=g[g.length-1];for(_=0;_<g.length;_+=1)Nt(g[_],I,n);for(_=0;_<u.length;_+=1)y.delete(u[_]);W(e,O.prev,B.next),W(e,d,O),W(e,B,I),v=I,d=B,p-=1,g=[],u=[]}else y.delete(f),Nt(f,v,n),W(e,f.prev,f.next),W(e,f,d===null?e.first:d.next),W(e,d,f),d=f;continue}for(g=[],u=[];v!==null&&v.k!==S;)(v.e.f&mt)===0&&(y??(y=new Set)).add(v),u.push(v),v=v.next;if(v===null)continue;f=v}g.push(f),d=f,v=f.next}if(v!==null||y!==void 0){for(var V=y===void 0?[]:$t(y);v!==null;)(v.e.f&mt)===0&&V.push(v),v=v.next;var J=V.length;if(J>0){var Z=null;Ee(e,V,Z,i)}}St.first=e.first&&e.first.e,St.last=d&&d.e}function Ae(r,e,n,a){ce(r.v,e),r.i=n}function Rt(r,e,n,a,l,s,o,c,i,k){var v=(i&_e)!==0,y=(i&me)===0,d=v?y?C(l,!1,!1):Et(l):l,g=(i&pe)===0?o:Et(o),u={i:g,v:d,k:s,a:null,e:null,prev:n,next:a};try{return u.e=It(()=>c(r,d,g,k),P),u.e.prev=n&&n.e,u.e.next=a&&a.e,n===null?e.first=u:(n.next=u,n.e.next=u.e),a!==null&&(a.prev=u,a.e.prev=u.e),u}finally{}}function Nt(r,e,n){for(var a=r.next?r.next.e.nodes_start:n,l=e?e.e.nodes_start:n,s=r.e.nodes_start;s!==a;){var o=ge(s);l.before(s),s=o}}function W(r,e,n){e===null?r.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ce(r,e,n){var a=""+r;return a}function Ie(r,e){return r==null?null:String(r)}function et(r,e,n,a,l,s){var o=r.__className;if(P||o!==n||o===void 0){var c=Ce(n);(!P||c!==r.getAttribute("class"))&&(c==null?r.removeAttribute("class"):r.className=c),r.__className=n}return s}function Ht(r,e,n,a){var l=r.__style;if(P||l!==e){var s=Ie(e);(!P||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=e}return a}const $e=`0,0
0.049,2.569
0.116,9.369
0.184,17.275
0.237,24.258
0.282,29.73
0.297,27.01
0.311,22.589
0.322,17.99
0.348,14.126
0.386,12.099
0.442,10.808
0.546,9.876
0.718,9.306
0.879,9.105
1.066,8.901
1.257,8.698
1.436,8.31
1.59,8.294
1.612,4.613
1.65,0`,Re=`0,0
0.052,5.045
0.096,9.91
0.196,24.144
0.251,31.351
0.287,32.973
0.3,29.91
0.344,17.117
0.37,14.414
0.4,12.973
0.5,11.712
0.6,11.171
0.7,10.631
0.8,10.09
0.9,9.73
1,9.55
1.101,9.91
1.2,9.55
1.3,9.73
1.4,9.73
1.5,9.73
1.6,9.73
1.7,9.55
1.8,9.73
1.9,9.73
2,9.55
2.1,9.55
2.2,9.73
2.3,9.19
2.375,9.37
2.4,5.95
2.44,0`,He=`0,0
0.15,1.371
0.186,1.92
0.206,3.387
0.242,5.587
0.252,7.422
0.277,8.705
0.333,13.474
0.359,15.858
0.374,16.592
0.394,18.609
0.435,21.544
0.476,24.661
0.521,26.44
0.643,21.72
0.725,20.432
0.821,19.511
0.898,18.958
1.025,18.219
1.142,18.032
1.259,17.844
1.396,17.472
1.569,17.282
1.757,17.275
1.895,17.086
2.027,17.816
2.042,12.494
2.052,8.457
2.063,4.97
2.09,0`,De=`0,0
0.148,7.638
0.228,12.253
0.294,16.391
0.353,20.21
0.382,22.756
0.419,25.26
0.477,23.074
0.52,20.845
0.593,19.093
0.688,17.5
0.855,16.225
1.037,15.427
1.205,14.948
1.423,14.627
1.452,15.741
1.503,14.785
1.736,14.623
1.955,14.303
2.21,14.141
2.494,13.819
2.763,13.338
3.12,13.334
3.382,13.013
3.404,9.352
3.418,4.895
3.45,0`;class G{constructor(e){Y(this,"points");Y(this,"impulse");Y(this,"time");let n;typeof e=="string"?n=e.split(`
`).map(l=>l.split(",").map(Number)).map(l=>({t:l[0],n:l[1]})):n=e;let a=0;for(const l in n){if(+l+1>=n.length)break;const s=n[+l],o=n[+l+1],c=.5*(s.n+o.n)*(o.t-s.t);a+=c}this.points=n,this.impulse=a,this.time=n[n.length-1].t}thrust(e){let n,a;for(const c in this.points){const i=this.points[c];if(i.t<=e&&(n=i),i.t>e){a=i;break}}if(n===void 0||a===void 0)return 0;const l=a.n-n.n,s=a.t-n.t,o=l/s;return n.n+o*(e-n.t)}pwm(e,n){const a=1/e,l=a-n;let s=[];for(let c=0;c<Math.floor(this.time/a);c++){const i=c*a;i-1e-13>=0&&s.push({t:i-1e-13,n:this.thrust(i-1e-13)}),s.push({t:i,n:0}),s.push({t:i+l,n:0}),s.push({t:i+l+1e-13,n:this.thrust(i+l+1e-13)}),this.points.filter(k=>k.t>i+l+1e-13&&k.t<i+a).forEach(k=>{s.push(k)})}this.points.filter(c=>c.t>Math.floor(this.time/a)*a).forEach(c=>{s.push(c)});const o=new Map;for(const c of s)o.set(c.t,c);return s=Array.from(o.values()).toSorted((c,i)=>c.t-i.t),new G(s)}}const qe=new G($e),Oe=new G(Re),Be=new G(He),Fe=new G(De);class Je{constructor(e,n,a){Y(this,"y");Y(this,"v");Y(this,"impulse");this.y=e,this.v=n,this.impulse=a}}function Le(r,e,n=9.81,a=0,l,s){const o=JSON.parse(JSON.stringify(r));o.points=o.points.map(p=>({t:p.t+l,n:p.n}));const c=(p,T)=>{const I=T.find(J=>Math.abs(J.t-p)<1e-12);if(I)return{t:p,n:I.n};const _=T.findIndex(J=>J.t>p);if(_<=0)return{t:p,n:0};const O=T[_-1],B=T[_],V=(p-O.t)/(B.t-O.t);return{t:p,n:O.n+V*(B.n-O.n)}},i=[...o.points].sort((p,T)=>p.t-T.t),k=a,v=l,y=s,d=0+n*(v-k),g=0+.5*n*Math.pow(v-k,2);let u=[];if(i.length>0){u.push(c(v,i));for(const p of i)p.t>v&&p.t<y&&u.push(p);u.push(c(y,i))}else u=[{t:v,n:0},{t:y,n:0}];let A=g,S=d,f=0;for(let p=0;p<u.length-1;p++){const T=u[p],I=u[p+1],_=I.t-T.t;if(Math.abs(_)<1e-12)continue;const O=(I.n-T.n)/_,B=S;f+=.5*(T.n+I.n)*_;const V=n*_-T.n/e*_-O/(2*e)*_*_;S+=V;const J=B*_+.5*n*_*_-T.n/(2*e)*_*_-O/(6*e)*_*_*_;A+=J}return new Je(A,S,f)}var Pe=Q("<stick-view-container><stick-container><end-cap></end-cap> <main-stick></main-stick> <end-cap></end-cap></stick-container> <p> </p></stick-view-container>",2);function At(r,e){var n=Pe();et(n,1,"svelte-x8gwye");var a=M(n);et(a,1,"svelte-x8gwye");var l=M(a);et(l,1,"svelte-x8gwye");var s=b(l,2);et(s,1,"svelte-x8gwye");var o=b(s,2);et(o,1,"svelte-x8gwye"),x(a);var c=b(a,2),i=M(c);x(c),x(n),kt(()=>{Ht(s,`height: ${e.length??""}px;`),H(i,`${e.length??""} cm`)}),K(r,n)}var Ve=Q('<p class="svelte-1npock"> </p>'),We=Q('<button class="svelte-1npock">D12 Curve</button> <button class="svelte-1npock">E12 Curve</button> <button class="svelte-1npock">E16 Curve</button> <button class="svelte-1npock">F15 Curve</button> <input type="file" accept=".csv" class="svelte-1npock"/>',1),Xe=Q('<button class="svelte-1npock">Start</button>'),Ye=Q('<button class="svelte-1npock">Toggle Thrust</button>'),ze=Q('<main class="svelte-1npock"><img src="flame.svg" alt="flame" id="flame" style="display: none;" class="svelte-1npock"/> <div class="hstack svelte-1npock"><img src="rocket.svg" alt="rocket" id="rocket" class="svelte-1npock"/> <!></div> <div class="hstack a-end svelte-1npock"><canvas id="canvas" width="162" height="2131" class="svelte-1npock"></canvas> <!></div> <div class="info svelte-1npock"><p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <hr class="svelte-1npock"/> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <hr class="svelte-1npock"/> <p class="svelte-1npock">1 px = 1 cm</p></div> <div class="info svelte-1npock"><!> <hr class="svelte-1npock"/> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <hr class="svelte-1npock"/> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p> <p class="svelte-1npock"> </p></div> <!></main>');function tn(r,e){ke(e,!1);let n=C(),a=C(),l=C(0);ee(()=>{w(n,window.innerHeight/2153),window.scrollTo(0,document.body.scrollHeight),w(a,Number(prompt("Mass (kg)","0.8")))});let s=C(),o=C(),c=C(),i=C(),k=C(),v=C(!1),y=C(0),d,g=C(0),u=C(20),A=C(0),S=C(-9.81),f=C([{n:0,t:0}]),p=C(!1);function T(){w(v,!0);let h=document.getElementById("canvas"),N=h.getContext("2d"),D=document.getElementById("rocket"),$=document.getElementById("flame");const m=.001;let E=0,q=performance.now()/1e3;function j(){var L;w(y,t(y)+1),w(g,t(g)+m),t(g)>=t(l)&&w(p,!0),t(g)>=t(o).time+t(l)&&w(p,!1),t(p)&&!d&&(d=t(g));let F=t(p)?t(o).thrust(t(g)-d):0;F!=((L=t(f)[t(f).length-1])==null?void 0:L.n)&&(w(f,[...t(f),{n:F,t:t(g)}]),window.scrollTo(0,document.body.scrollHeight)),w(S,(t(a)*-9.81+F)/t(a)),w(A,t(A)+t(S)*m),w(u,t(u)+t(A)*m),t(u)<=0&&w(v,!1)}function U(){var L;N.clearRect(0,0,h.width,h.height),N.drawImage(D,50,-t(u)*100+2e3),(((L=t(f)[t(f).length-1])==null?void 0:L.n)??0)>0&&N.drawImage($,78,-t(u)*100+2e3+131-11)}function X(){let F=performance.now()/1e3,L=F-q;for(q=F,E+=L;E>=m&&t(v);)j(),E-=m;U(),t(v)&&requestAnimationFrame(X)}requestAnimationFrame(X)}ye(()=>(t(s),t(o),t(c),t(u),t(S),t(a),t(k),t(l),t(i)),()=>{var h;if(t(s)&&!t(o)){w(c,Number(prompt("PWM Frequency","5")));const N=Number(prompt("Step","0.005")),D=1/t(c);for(let $=0;$<=Math.sqrt(2*t(u)/-t(S));$+=N)for(let m=0;m<=D;m+=N){const E=t(s).pwm(t(c),m),q=Le(E,t(a),-t(S),0,$,$+E.time);(!q.v||!q.y)&&console.log(E),Math.abs(q.y-20)<.1&&Math.abs(q.v)<Math.abs(((h=t(k))==null?void 0:h.v)??1/0)&&Math.abs(q.v)<2&&(w(l,$),w(o,E),w(i,m),w(k,q))}t(k)||(alert("No viable landing configurations found. Reloading."),location.reload()),console.log(t(l),t(i),t(k))}}),be(),te();var I=ze(),_=b(M(I),2),O=b(M(_),2);At(O,{length:131}),x(_);var B=b(_,2),V=b(M(B),2);At(V,{length:2e3}),x(B);var J=b(B,2),Z=M(J),Dt=M(Z);x(Z);var st=b(Z,2),qt=M(st);x(st);var at=b(st,4),Ot=M(at);x(at);var rt=b(at,2),Bt=M(rt);x(rt);var yt=b(rt,2),Ft=M(yt);x(yt),Me(4),x(J);var lt=b(J,2),bt=M(lt);Te(bt,1,()=>t(f),Se,(h,N)=>{var D=Ve(),$=M(D);x(D),kt((m,E)=>H($,`${m??""} s - ${E??""} N`),[()=>(t(N),R(()=>[String(Math.round(t(N).t*1e3)/1e3)].map(m=>m.includes(".")?m:m+".")[0].padEnd(5,"0"))),()=>(t(N),R(()=>[String(Math.round(t(N).n*100)/100)].map(m=>m.includes(".")?m:m+".")[0].padEnd(5,"0")))],gt),K(h,D)});var it=b(bt,4),Jt=M(it);x(it);var ot=b(it,2),Lt=M(ot);x(ot);var ct=b(ot,2),Pt=M(ct);x(ct);var vt=b(ct,2),Vt=M(vt);x(vt);var pt=b(vt,4),Wt=M(pt);x(pt);var ut=b(pt,2),Xt=M(ut);x(ut);var ft=b(ut,2),Yt=M(ft);x(ft);var ht=b(ft,2),zt=M(ht);x(ht);var wt=b(ht,2),Gt=M(wt);x(wt),x(lt);var Ut=b(lt,2);{var Kt=h=>{var N=We(),D=xe(N),$=b(D,2),m=b($,2),E=b(m,2),q=b(E,2);z("click",D,()=>{w(s,qe)}),z("click",$,()=>{w(s,Oe)}),z("click",m,()=>{w(s,Be)}),z("click",E,()=>{w(s,Fe)}),z("change",q,j=>{var X;const U=(X=j.target.files)==null?void 0:X[0];if(U){const F=new FileReader;F.onload=L=>{var nt;const dt=(nt=L.target)==null?void 0:nt.result;w(s,new G(dt)),console.dir(t(s))},F.readAsText(U)}}),K(h,N)},Qt=(h,N)=>{{var D=m=>{var E=Xe();z("click",E,T),K(m,E)},$=m=>{var E=Ye();z("click",E,()=>{w(p,!t(p))}),K(m,E)};Tt(h,m=>{t(v)?m($,!1):m(D)},N)}};Tt(Ut,h=>{t(s)==null?h(Kt):h(Qt,!1)})}x(I),kt((h,N,D,$,m,E,q,j,U,X,F,L,dt,nt)=>{Ht(I,`transform: scale(${t(n)??""});`),H(Dt,`cycle = ${h??""}`),H(qt,`t = ${N??""} s`),H(Ot,`s = ${D??""} m`),H(Bt,`v = ${$??""} ms^-1`),H(Ft,`a = ${m??""} ms^-2`),H(Jt,`J = ${E??""} N`),H(Lt,`t = ${q??""} s`),H(Pt,`J_pwm = ${j??""} N`),H(Vt,`t_pwm = ${U??""} s`),H(Wt,`f = ${X??""} Hz`),H(Xt,`pt = ${F??""} s`),H(Yt,`t_i = ${L??""} s`),H(zt,`s_fe = ${dt??""} m`),H(Gt,`v_fe = ${nt??""} ms^-1`)},[()=>(t(y),R(()=>String(t(y)).padStart(3,"0"))),()=>(t(g),R(()=>String(Math.round(t(g)*1e3)/1e3).padEnd(5,"0"))),()=>(t(u),R(()=>String(Math.round(t(u)*100)/100))),()=>(t(A),R(()=>(t(A)>=0?"+":"-")+String(Math.round(Math.abs(t(A))*100)/100))),()=>(t(S),R(()=>String(Math.round(t(S)*100)/100).padEnd(4,"0").padStart(5,"+"))),()=>(t(s),R(()=>{var h;return Math.round((((h=t(s))==null?void 0:h.impulse)??0)*100)/100})),()=>(t(s),R(()=>{var h;return Math.round((((h=t(s))==null?void 0:h.time)??0)*100)/100})),()=>(t(o),R(()=>{var h;return Math.round((((h=t(o))==null?void 0:h.impulse)??0)*100)/100})),()=>(t(o),R(()=>{var h;return Math.round((((h=t(o))==null?void 0:h.time)??0)*100)/100})),()=>(t(c),R(()=>String(Math.round((t(c)??0)*100)/100))),()=>(t(i),R(()=>String(Math.round((t(i)??0)*100)/100))),()=>(t(l),R(()=>String(Math.round(t(l)*1e3)/1e3))),()=>(t(k),R(()=>{var h;return String(Math.round((20-(((h=t(k))==null?void 0:h.y)??0))*1e3)/1e3)})),()=>(t(k),R(()=>{var h;return String(Math.round(-(((h=t(k))==null?void 0:h.v)??0)*1e3)/1e3)}))],gt),K(r,I),we()}export{tn as component};
